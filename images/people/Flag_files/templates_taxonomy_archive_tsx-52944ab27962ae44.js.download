(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([["templates_taxonomy_archive_tsx"],{"./components/this-day-in-history-grid/card.tsx":function(e,t,i){"use strict";i.d(t,{z:function(){return x}});var s=i("./node_modules/react/jsx-runtime.js"),n=i("./utils/post-helpers.ts"),r=i("./assets/icons/flash.js"),o=i("./node_modules/next/image.js"),a=i.n(o),d=i("./node_modules/classnames/index.js"),l=i.n(d),u=i("./utils/hooks/use-post-image.ts"),c=i("./components/link/index.tsx"),m=i("./utils/hooks/use-primary-term.ts"),v=i("./utils/url-helpers.ts"),p=i("./node_modules/@wordpress/i18n/build-module/index.js"),f=i("./node_modules/@wordpress/react-i18n/build-module/index.js"),_=i("./node_modules/next/config.js"),h=i.n(_)()().publicRuntimeConfig.IMAGE_PLACEHOLDER,y=["(min-width: 1248px) 384px","(min-width: 850px) calc(33.33vw - 2.5rem)","(min-width: 636px) calc(50vw - 2.5rem)","calc(100vw - 2.5rem)"].join(", ");function x(e){var t,i,o,d,_=e.post,x=e.images,g=e.terms,j=(0,f.QT)().__,b="type"in _,k=(0,u.J)(b?_:void 0,x),w=l()("tdih-posts-grid__article has-elevation",{"tdih-posts-grid__article--has-featured-image":!!k}),N=b?(null===(t=null===k||void 0===k?void 0:k.media_details.sizes)||void 0===t||null===(i=t.full)||void 0===i?void 0:i.source_url)||"":_.featured_media_url||"",E=(0,m.Z)(b?_:void 0,g),L=b?E:_.story_category[0],S=b?_.title.rendered:_.title,T="",C="",P=b?(0,v.a9)(_.link):"/this-day-in-history/".concat(_.slug);if(L&&("link"in L?T=L.link:"url"in L&&(T=L.url)),b){if(!(C=(null===(o=_.tdih_year_term)||void 0===o?void 0:o.name)||"")){var R,I=_.tdih_year[0];C=(null===g||void 0===g||null===(R=g[I])||void 0===R?void 0:R.name)||""}}else C=(null===(d=_.year[0])||void 0===d?void 0:d.name)||"";var A=(0,n.SH)((null===L||void 0===L?void 0:L.name)||"");return(0,s.jsxs)("article",{className:w,children:[(0,s.jsx)(a(),{className:"tdih-posts-grid__article-image",src:N||h,layout:"fill",alt:"",sizes:y}),C&&(0,s.jsx)("span",{className:"tdih-posts-grid__article-year",children:C}),(0,s.jsx)("h3",{className:"tdih-posts-grid__article-title",children:(0,s.jsx)(c.s3,{href:P,className:"tdih-posts-grid__article-link",children:(0,n.SH)(S)})}),T&&(null===L||void 0===L?void 0:L.name)&&(0,s.jsxs)(c.UP,{href:(0,v.a9)(T),className:"tdih-posts-grid__article-meta","aria-label":(0,p.gB)(j("Read more articles on %s"),A),children:[(0,s.jsx)(r.T,{width:"20",height:"20"}),A]})]})}},"./components/video-player/index.tsx":function(e,t,i){"use strict";i.d(t,{Y:function(){return E}});var s=i("./node_modules/@swc/helpers/src/_sliced_to_array.mjs"),n=i("./node_modules/react/jsx-runtime.js"),r=i("./node_modules/next/config.js"),o=i.n(r),a=i("./node_modules/@sentry/nextjs/esm/index.client.js"),d=i("./node_modules/react/index.js"),l=i("./node_modules/classnames/index.js"),u=i.n(l),c=i("./node_modules/@wordpress/react-i18n/build-module/index.js"),m=i("./components/raw-html/index.tsx"),v=i("./context/video.tsx"),p=i("./assets/icons/close.js"),f=i("./node_modules/@aenetworks/theoplayer/EditorialPlayerFull/index.js"),_=i.n(f),h=i("./utils/hooks/use-key.ts"),y=i("./node_modules/@wordpress/i18n/build-module/index.js"),x=o()().publicRuntimeConfig,g=function(e){return a.uT(e,"error")};function j(e){var t=e.googleState,i=e.theoState,s=(null===t||void 0===t?void 0:t.error)||(null===i||void 0===i?void 0:i.error),r=(0,c.QT)().__;if(s){var o=r('To continue watching video, please disable your ad blocking software and reload the page. For instructions, <a href="/disable-ad-blocker">click here</a>.');return(0,n.jsx)("div",{className:"video-player__fallback",children:(0,n.jsx)(m.w,{value:o,tagName:"div"})})}return null}var b="is-sticky",k="is-visible",w="is-out",N="is-closable";function E(e){var t=e.className,i=e.video,r=e.autoplay,o=void 0!==r&&r,a=(0,c.QT)().__,l=(0,v.d)(),m=(0,d.useRef)(),f=(0,d.useRef)(null),E=(0,d.useRef)(null),L=(0,d.useRef)(!1),S=(0,d.useRef)(!1),T=(0,d.useRef)(!1),C=(0,d.useState)(!1),P=C[0],R=C[1],I=(0,d.useState)(!0),A=I[0],H=I[1],D=(0,d.useState)(!1),G=D[0],Q=D[1],z=(0,d.useState)(!1),F=z[0],O=z[1],U=(0,d.useState)(!1),B=U[0],M=U[1],Y=F&&G,Z=!!o&&A&&!G&&P,J=!!o&&B&&!G;(0,h.z)("Escape",(function(){m.current&&m.current.pause()}),E),i.restrictionId=11898,(0,d.useEffect)((function(){E.current=document.body;var e=new IntersectionObserver((function(e){var t=!(0,s.Z)(e,1)[0].isIntersecting;Q(t),R(!0)}),{rootMargin:"-35px 0px 0px 0px"});return f.current?(e.observe(f.current),function(){e.disconnect()}):function(){}}),[]),(0,d.useEffect)((function(){var e;f.current&&(Y?(e=f.current).classList.contains(b)||(e.classList.add(b),e.offsetHeight,e.classList.add(k)):function(e){e.classList.contains(b)&&(e.classList.add(w),e.addEventListener("transitionend",(function(){e.classList.remove(k,w,b)}),{once:!0}))}(f.current))}),[Y]),(0,d.useEffect)((function(){Z&&l&&l.canAutoPlay(!1)&&H(!1)}),[Z,l]),(0,d.useEffect)((function(){J&&!L.current&&l.autoplay(m.current,(function(e){L.current=e}))}),[J,l]),(0,d.useEffect)((function(){var e;if(!S.current)return F&&(e=setTimeout((function(){f.current&&(S.current=!0,f.current.classList.add(N))}),5e3)),function(){e&&clearTimeout(e)}}),[F]),(0,d.useEffect)((function(){return function(){l.unregister(m.current)}}),[]);var K=(0,d.useCallback)((function(e){m.current=e,l.register(e,{handlePlayPause:O}),M(!0)}),[]),V=(0,d.useCallback)((function(){m.current&&m.current.pause()}),[]);if((0,d.useEffect)((function(){var e=null===window||void 0===window?void 0:window.PARSELY;if(e)try{F?e.video.trackPlay(i.id,{title:i.title,image_url:i.poster,section:document.title}):e.video.trackPause(i.id)}catch(t){}}),[F]),(0,d.useEffect)((function(){B&&T.current&&m.current&&(l.play(m.current),T.current=!1)}),[B]),!i.publicUrl)return null;var $=u()("video-player",t),q=x.APP_ORIGIN||"",W="".concat(q,"theoplayer"),X=(0,y.gB)("Play %s",i.title||"video");return(0,n.jsxs)("div",{className:$,ref:f,children:[(0,n.jsx)("button",{className:"video-player__close","aria-label":a("Close and pause the video"),type:"button",onClick:V,children:(0,n.jsx)(p.x,{})}),A&&(0,n.jsxs)("div",{className:"video-player-decoy",style:{backgroundImage:"url(".concat(i.poster,")")},children:[i.title&&(0,n.jsx)("div",{className:"video-player-decoy__title-wrapper",children:(0,n.jsx)("div",{className:"video-player-decoy__title","aria-hidden":!0,children:i.title})}),(0,n.jsx)("button",{type:"button",className:"video-player-decoy__play","aria-label":X,onClick:function(){H(!1),T.current=!0},children:(0,n.jsx)("span",{className:"video-player-decoy__play-icon"})})]}),!A&&(0,n.jsx)(_(),{video:i,getPlayerRef:K,config:{brand:"history",gaId:"G-CSQS2LS31Y",libraryLocation:W,logError:g,cdnDecision:{apiKey:"4UukVONcT1IgL2y94GRp",url:"https://rt.ns1p.net/v1/decision?name=rankings.ns1.video.aetnd.com&type=CNAME&cedexis-format=true"}},fallback:(0,n.jsx)(j,{})})]})}},"./context/video.tsx":function(e,t,i){"use strict";i.d(t,{G:function(){return l},d:function(){return u}});var s=i("./node_modules/react/jsx-runtime.js"),n=i("./node_modules/react/index.js");function r(){}var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2;if(!i)if(e.readyState>0)e.play();else{var s=setTimeout((function(){t>8||(e.removeEventListener("loadedmetadata",n),o(e,t+1))}),750),n=function(){clearTimeout(s),e.removeEventListener("loadedmetadata",n)};e.addEventListener("loadedmetadata",n),e.play()}},a=function(e){try{"undefined"!==typeof window.gtag?window.gtag("event",e):setTimeout(a,500,e)}catch(t){}},d=(0,n.createContext)({register:r,unregister:r,autoplay:r,canAutoPlay:function(){return!1},play:r}),l=function(e){var t=e.children,l=(0,n.useRef)({}),u=(0,n.useRef)(),c=(0,n.useRef)(!1),m=(0,n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.handlePlayPause,s=void 0===i?r:i;if(e){l.current[e.uid]=e;var n=!1,o=!1,d=!1,c=function(t){"playing"===t.type&&s(!0),u.current&&u.current.uid!==e.uid&&(u.current.pause(),o=!1,d=!1),u.current=e,o||(o=!0,a("video_play"))},m=function(){var t;n||((null===(t=u.current)||void 0===t?void 0:t.uid)===e.uid&&(u.current=void 0),s(!1))};e.addEventListener("play",c),e.addEventListener("playing",c),e.addEventListener("pause",m),e.addEventListener("ended",m),e.addEventListener("seeking",(function(){n=!0})),e.addEventListener("seeked",(function(){n=!1}));try{e.ads&&e.ads.addEventListener("adbegin",(function(){d||(d=!0,a("video_ad_play"))}))}catch(v){}}}),[]),v=(0,n.useCallback)((function(e){e&&(l.current[e.uid]=void 0)}),[]),p=(0,n.useCallback)((function(e){return"undefined"!==typeof e&&!u.current}),[]),f=(0,n.useCallback)((function(e,t){if(p(e)){var s=e;i.e("node_modules_can-autoplay_build_can-autoplay_es_js").then(i.bind(i,"./node_modules/can-autoplay/build/can-autoplay.es.js")).then((function(e){return e.default.video({timeout:500})})).then((function(e){e.result||c.current?(c.current=!0,o(s)):(s.muted=!0,o(s)),t(!0)}))}else t(!1)}),[]),_=(0,n.useCallback)((function(e){o(e)}),[]);return(0,s.jsx)(d.Provider,{value:{register:m,unregister:v,autoplay:f,canAutoPlay:p,play:_},children:t})},u=function(){var e=(0,n.useContext)(d);return e||{register:r,unregister:r,autoplay:r,play:r,canAutoPlay:function(){return!1}}}},"./templates/taxonomy/archive.tsx":function(e,t,i){"use strict";i.d(t,{A:function(){return b}});var s=i("./node_modules/@swc/helpers/src/_object_without_properties.mjs"),n=i("./node_modules/@swc/helpers/src/_sliced_to_array.mjs"),r=i("./node_modules/react/jsx-runtime.js"),o=i("./components/layout/index.tsx"),a=i("./components/page-header/index.tsx"),d=i("./context/term-page.tsx"),l=i("./components/block-featured-posts/index.tsx"),u=i("./node_modules/@wordpress/react-i18n/build-module/index.js"),c=i("./components/featured-content-card/index.tsx"),m=i("./components/card-grid/index.tsx"),v=i("./node_modules/next/link.js"),p=i.n(v),f=i("./components/this-day-in-history-grid/card.tsx"),_=i("./node_modules/@wordpress/i18n/build-module/index.js");function h(e){var t=e.term,i=e.posts,s=e.title,n=e.images,o=e.moreLink,a=e.terms,d=e.priority,l=(0,u.QT)().__,v=i[0];if(!v)return null;var h=i.slice(1),y=s?"h3":"h2",x="this-day-in-history"===v.type,g=(0,_.gB)(l("See all %1$s on %2$s"),s||l("Posts"),t.name);return(0,r.jsx)("div",{className:"block-featured-posts block-featured-posts--thirds",children:(0,r.jsxs)("div",{className:"block-featured-posts__container",children:[(0,r.jsxs)("div",{className:"block-featured-posts__title-container",children:[s&&(0,r.jsx)("h2",{className:"block-featured-posts__title",children:s}),o&&(0,r.jsx)(p(),{href:o,passHref:!0,children:(0,r.jsx)("a",{className:"block-featured-posts__more-link button has-elevation",href:"replace","aria-label":g,children:l("See All")})})]}),(0,r.jsx)("hr",{className:"block-featured-posts__divider"}),x&&(0,r.jsx)("div",{className:"tdih-posts-grid",children:i.map((function(e){return(0,r.jsx)(f.z,{post:e,images:n,terms:a},e.id)}))}),!x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.n,{post:v,image:n[v.featured_media],priority:d,className:"topic-archive-featured",headingTag:y}),(0,r.jsx)(m.g,{stories:h,images:n,className:"topic-archive-stories is-style-3-col",cardsTitle:y})]})]})})}i("./node_modules/@swc/helpers/src/_async_to_generator.mjs"),i("./node_modules/@swc/helpers/src/_define_property.mjs"),i("./node_modules/@swc/helpers/src/_object_spread.mjs"),i("./node_modules/@swc/helpers/src/_object_spread_props.mjs"),i("./node_modules/@swc/helpers/src/_ts_generator.mjs"),i("./utils/api.ts"),i("./utils/keyBy.ts");var y;i("./utils/url-helpers.ts"),i("./utils/data/clean-url.ts");!function(e){e.topics="topics",e.videos="videos",e.stories="stories",e.thisDayInHistory="thisDayInHistory"}(y||(y={}));var x=i("./node_modules/next/router.js"),g=i("./components/video-player/index.tsx"),j=i("./context/video.tsx");function b(e){var t,i,c,m,v,p,f,_,b,k,w,N,E,L,S,T=e.primaryTerm,C=e.images,P=e.featuredStories,R=e.terms,I=(0,s.Z)(e,["primaryTerm","images","featuredStories","terms"]),A=(0,u.QT)().__,H=(0,x.useRouter)().pathname,D=(0,n.Z)(H.split("/"),2)[1],G=(null===P||void 0===P?void 0:P.length)>0,Q={featuredStories:A("Featured Articles"),topics:A("Topics"),stories:A("Stories"),thisDayInHistory:A("This Day in History"),videos:A("Videos")};"story_byline"===T.taxonomy&&(E=null===(S=C[null===(L=T.meta)||void 0===L?void 0:L.avatar_image_id])||void 0===S?void 0:S.source_url);var z={id:(null===T||void 0===T||null===(t=T.meta)||void 0===t||null===(i=t.featured_video)||void 0===i?void 0:i.id)||"",ppl_id:(null===T||void 0===T||null===(c=T.meta)||void 0===c||null===(m=c.featured_video)||void 0===m?void 0:m.ppl_id)||[],publicUrl:(null===T||void 0===T||null===(v=T.meta)||void 0===v||null===(p=v.featured_video)||void 0===p?void 0:p.public_url)||"",title:(null===T||void 0===T||null===(f=T.meta)||void 0===f||null===(_=f.featured_video)||void 0===_?void 0:_.title)||"",poster:(null===T||void 0===T||null===(b=T.meta)||void 0===b||null===(k=b.featured_video)||void 0===k?void 0:k.poster)||"",restrictionId:(null===T||void 0===T||null===(w=T.meta)||void 0===w||null===(N=w.featured_video)||void 0===N?void 0:N.restriction_id)||void 0},F=!!z.id;return(0,r.jsx)(d.K,{primaryTerm:T,children:(0,r.jsxs)(o.A,{seo:T,mainClassName:"taxonomy-archive",children:[(0,r.jsx)(a.m,{title:T.name,summary:T.description,avatar:E,disableUtils:!0}),(0,r.jsxs)("div",{className:"archive__content",children:[(0,r.jsx)(l.k,{posts:P,images:C,title:Q.featuredStories,priority:!0}),Object.values(y).map((function(e){var t=Q[e];if("undefined"!==typeof I[e]){var i=I[e],s=!G;if(i.posts.length>0){var n,o;G=!0;var a=e===y.thisDayInHistory?"this-day-in-history":e,d=i.hasMore?"/".concat(D,"/").concat(T.slug,"/").concat(a):void 0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{term:T,posts:i.posts,images:C,moreLink:d,title:t,priority:s,terms:R},e),F&&"topics"===e&&(0,r.jsx)("div",{className:"archive__video",children:(0,r.jsx)(j.G,{children:(0,r.jsx)(g.Y,{video:z,autoplay:!(null===T||void 0===T||null===(n=T.meta)||void 0===n||null===(o=n.featured_video)||void 0===o?void 0:o.disable_autoplay)})})})]})}}return null}))]})]})})}},"./utils/hooks/use-post-image.ts":function(e,t,i){"use strict";function s(e,t){var i;return t&&e&&(e.meta&&e.meta.post_thumbnail_image&&e.meta.post_thumbnail_image in t?i=t[e.meta.post_thumbnail_image]:e.featured_media&&e.featured_media in t&&(i=t[e.featured_media])),i}i.d(t,{J:function(){return s}})},"?599d":function(){}}]);